<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:base="http://www.dc4plus.com/references/rdf_sem.html" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:foaf="http://xmlns.com/foaf/0.1/" >
    <head>
        <title>BimSPARQL: Domain-specific functional SPARQL extensions for querying RDF building data</title>
        
        <meta charset="utf-8" />
        <meta content="width=device-width, initial-scale=1" name="viewport" />
        <link href="https://dokie.li/media/css/basic.css" media="all" rel="stylesheet" title="Basic" />
        <link disabled="" href="https://dokie.li/media/css/lncs.css" media="all" rel="stylesheet alternate" title="LNCS" />
        <link href="https://dokie.li/media/css/acm.css" media="all" rel="stylesheet" title="ACM" />
        <link href="https://dokie.li/media/css/do.css" media="all" rel="stylesheet" />
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" media="all" rel="stylesheet" />
        <script src="https://dokie.li/scripts/simplerdf.js"></script>
        <script src="https://dokie.li/scripts/medium-editor.min.js"></script>
        <script src="https://dokie.li/scripts/do.js"></script><script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    </head>
	<body about="" id="article" typeof="schema:ScholarlyArticle sioc:Post prov:Entity foaf:Document sioc:Post biblio:Paper bibo:Document as:Article" prefix="rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns# rdfs: http://www.w3.org/2000/01/rdf-schema# owl: http://www.w3.org/2002/07/owl# xsd: http://www.w3.org/2001/XMLSchema# dcterms: http://purl.org/dc/terms/ dctypes: http://purl.org/dc/dcmitype/ foaf: http://xmlns.com/foaf/0.1/ v: http://www.w3.org/2006/vcard/ns# pimspace: http://www.w3.org/ns/pim/space# cc: https://creativecommons.org/ns# skos: http://www.w3.org/2004/02/skos/core# prov: http://www.w3.org/ns/prov# qb: http://purl.org/linked-data/cube# schema: http://schema.org/ void: http://rdfs.org/ns/void# rsa: http://www.w3.org/ns/auth/rsa# cert: http://www.w3.org/ns/auth/cert# cal: http://www.w3.org/2002/12/cal/ical# wgs: http://www.w3.org/2003/01/geo/wgs84_pos# org: http://www.w3.org/ns/org# biblio: http://purl.org/net/biblio# bibo: http://purl.org/ontology/bibo/ book: http://purl.org/NET/book/vocab# ov: http://open.vocab.org/terms/ sioc: http://rdfs.org/sioc/ns# doap: http://usefulinc.com/ns/doap# dbr: http://dbpedia.org/resource/ dbp: http://dbpedia.org/property/ sio: http://semanticscience.org/resource/ opmw: http://www.opmw.org/ontology/ deo: http://purl.org/spar/deo/ doco: http://purl.org/spar/doco/ cito: http://purl.org/spar/cito/ fabio: http://purl.org/spar/fabio/ oa: http://www.w3.org/ns/oa# as: https://www.w3.org/ns/activitystreams# ldp: http://www.w3.org/ns/ldp# solid: http://www.w3.org/ns/solid/terms# acl: http://www.w3.org/ns/auth/acl# dio: https://w3id.org/dio#">
        <main>
            <article about="" typeof="schema:Article">
	  	        <div class="article-content" id="content">
                    
                    <p><div class="article-part article-title" property="schema:name"><h1 class="article-part article-title" property="schema:name">BimSPARQL: Domain-specific functional SPARQL extensions for querying RDF building data</h1></div></p><div class="article-part metadata article-authors" id="authors"><dd id="ChiZhang(DepartmentofBuiltEnvironment,EindhovenUniversityofTechnology,P.O.box513,Eindhoven,TheNetherlands)" rel="bibo:authorList" resource="#ChiZhang(DepartmentofBuiltEnvironment,EindhovenUniversityofTechnology,P.O.box513,Eindhoven,TheNetherlands)">
                        <span rel="schema:creator schema:publisher schema:author" typeof="schema:person">
                            Chi Zhang (Department of Built Environment, Eindhoven University of Technology, P.O. box 513, Eindhoven, The Netherlands)
                        </span>
                    </dd><dd id="JakobBeetz(DepartmentofArchitecture,RWTHUniversityAachen,Schinkelstrasse1,52062Aachen,Germany)" rel="bibo:authorList" resource="#JakobBeetz(DepartmentofArchitecture,RWTHUniversityAachen,Schinkelstrasse1,52062Aachen,Germany)">
                        <span rel="schema:creator schema:publisher schema:author" typeof="schema:person">
                            Jakob  Beetz ( Department of Architecture, RWTH University Aachen, Schinkelstrasse 1, 52062 Aachen, Germany)
                        </span>
                    </dd><dd id="BaukedeVries(DepartmentofBuiltEnvironment,EindhovenUniversityofTechnology,P.O.box513,Eindhoven,TheNetherlands)" rel="bibo:authorList" resource="#BaukedeVries(DepartmentofBuiltEnvironment,EindhovenUniversityofTechnology,P.O.box513,Eindhoven,TheNetherlands)">
                        <span rel="schema:creator schema:publisher schema:author" typeof="schema:person">
                            Bauke  de Vries (Department of Built Environment, Eindhoven University of Technology, P.O. box 513, Eindhoven, The Netherlands)
                        </span>
                    </dd></div><p><section id="Abstract" class="article-part metadata article-abstract" datatype="rdf:HTML" property="schema:abstract"><p>In this paper, we propose to extend SPARQL functions for querying Industry Foundation Classes (IFC) building data. The official IFC documentation and BIM requirement checking use cases are used to drive the development of the proposed functionality. By extending these functions, we aim to 1) simplify writing queries and 2) retrieve useful information implied in 3D geometry data according to requirement checking use cases. Extended functions are modelled as RDF vocabularies and classified into groups for further extensions. We combine declarative rules with procedural programming to implement extended functions. Realistic requirement checking scenarios are used to evaluate and demonstrate the effectiveness of this approach and indicate query performance. Compared with query techniques developed in the conventional Building Information Modeling domain, we show the added value of such approach by providing an application example of querying building and regulatory data, where spatial and logic reasoning can be applied and data from multiple sources are required. Based on the implementation and evaluation work, we discuss the advantages and applicability of this approach, current issues and future challenges.</p></section></p><div class="article-part metadata article-keywords"><span class="keyword">BimSPARQL</span><span class="keyword"> IFC</span><span class="keyword"> ifcOWL</span><span class="keyword"> SPARQL</span><span class="keyword"> function</span></div><div class="article-part article-body"><section id="Introduction" inlist="" rel="schema:hasPart" resource="#Introduction">
                            <h2 property="schema:name">Introduction</h2>
			                <div datatype="rdf:HTML" property="schema:description" resource="#Introduction" typeof="deo:Introduction">
			                <p>As integrating data in the architecture, engineering and construction (AEC) industry is becoming increasingly important [47], Building Information Modeling (BIM) has been adopted by a growing number of industry practitioners and has led to the specification and standardization of the data standard Industry Foundation Classes (IFC) [16, 27]. Using BIM applications and the IFC standard to create, exchange and process building-related data is the state-of-the-art in *Corresponding author. E-mail: c.zhang@tue.nl. the AEC industry’s day-to-day operations. Even using IFC-based instance building models, however, the retrieval of domain specific information is currently challenging for industry practitioners, who are generally depending on proprietary, vendor-specific solutions. Building models are used for different engineering tasks, where information needs to be flexibly derived according to a wide range of use case requirements. However, the IFC data model is designed for the creation and exchange of product data, but not tailored for various query and analysis tasks [49]. Many useful relationships and properties that are explicitly defined or implied in building models are difficult to 1570-0844/0-1900/$35.00 c 0 – IOS Press and the authors. All rights reserved 2 BimSPARQL: Domain-specific functional SPARQL extensions for querying RDF building data retrieve in day-to-day processes. Furthermore, the IFC data is limited by its schema which is not flexible enough to adapt to situations when data from different sources needs to be integrated and processed [4, 40]. Although IFC is a data model aiming to cover the entire AEC industry, much information used in common industry scenarios is not specified within the scope of the IFC data model, including e.g. product classifications, building requirements and regulations as well as data from neighboring domains such as urban planning and sensor networks. Using the Resource Description Framework (RDF) and Semantic Web technologies to represent building data has been proposed time and again over the last decade [4, 39, 46]. Unlike conventional data modeling approaches that are limited by the scope of their underlying schemas, these Semantic Web technologies provide an open and common environment for sharing, integrating and linking data from different domains and databases. Semantics can be formally defined with the logic basis of these technologies and shared using web-based mechanisms such as Uniform Resource Identifiers (URIs) and the Hypertext Transfer Protocol (HTTP). The ifcOWL ontology has been developed as a counterpart of the IFC data model using the Web Ontology Language (OWL) and RDF. The ifcOWL ontology is in the final stages of the standardization process driven by the buildingSMART organization, the most important industry standardization body and forms the foundation for Semantic Web applications for the AEC domain [39]. By transforming IFC instance building models to RDF data that follows the ifcOWL ontology, using a standard query language such as SPARQL to process them becomes possible [20]. By using plain SPARQL 1 on ifcOWL data, however, some of the aforementioned issues still remain to be addressed. Many query and analysis use cases in the AEC domain are hampered by the complexity of IFC data, and many required relationships and properties e.g. property sets, product geometry quantities and spatial and topological relations etc. are difficult to retrieve. In this paper, we use SPARQL as a base query language and propose to extend it with a set of functions specific for querying ifcOWL building data. The motivation is elaborated in Section 2. We focus on the official IFC documentation and common BIM requirement checking use cases to define required func1 In this paper, plain SPARQL refers to SPARQL queries that are compliant with the W3C Recommendation SPARQL 1.1. tions. Some of the use case examples are presented in Section 4. The strategy of extending SPARQL functions for domain specific usage has also been employed in other industry domains. For example, the Open Geospatial Consortium (OGC) has standardized GeoSPARQL as a set of vocabularies and functions for geospatial data [43], allowing e.g. to implement spatial queries (e.g. ’within distance’, ’touching’ etc.). We argue, that the standardization, implementation (e.g. Marmotta, Stardog, Oracle, GraphDB etc.) and industry adoption of GeoSPARQL provides a reasonable indication for the feasibility of a similar approach for the AEC industry. There are currently three major components of the BimSPARQL project presented in this paper: 1) A set of functions modelled as RDF vocabularies that can be used in SPARQL queries (see Section 4); 2) A set of query transformation rules to map functions to IFC data structures to make writing queries easier (see Section 5); 3) A module for implementing geometryrelated functions for deriving implicit information (see Section 5). The official IFC specification and BIM requirement checking use cases in the Netherlands and Norway, and some checks that have been implemented in Solibri Model Checker (SMC) [10, 45, 48, 51] have been used to drive the development of the proposed and implemented functionality. The links to the vocabularies, transformation rules and source code repository of the prototypical reference implementation are provided in Appendix A. The extended functions in this research do not require extensions for the grammar of SPARQL. With SPARQL as a common interface language, extended functions can be used to query building data alone or combined with data from other sources, which in turn may have their own domain specific functions (Fig. 1). We believe that this is a generic approach that is usable in many different use cases, including e.g. multimodel collaboration, quantity take-off and cost estimation, requirement and code compliance checking etc.. As a W3C standard, SPARQL has been widely implemented by a plethora of RDF Application Programming Interfaces (APIs) and databases, and there are many of them support extending functions (e.g. see Section 3.3 and Section 5), hence can be used as base environments for implementing extended functions. This paper is structured as follows: In Section 2, the background of IFC and ifcOWL is briefly introduced and the motivation of this research is elaborated. In Section 3, an overview of related research is provided. The proposed functional extensions for SPARQL are BimSPARQL: Domain-specific functional SPARQL extensions for querying RDF building data 3 Fig. 1. SPARQL query with domain specific functional extensions introduced and classified in Section 4, followed by example use cases. In Section 5, implementation methods are described and a prototype is presented. In Section 6, realistic use cases put forward by research communities and building models are used to evaluate this prototype and demonstrate the value of this approach in comparison with SPARQL and exiting work. In Section 7, an extended example is presented to show the extensibility of this method. A discussion about added value, limitations and further work concludes this paper. </p></div>
                    	</section><section id="Backgroundandmotivation" inlist="" rel="schema:hasPart" resource="#Backgroundandmotivation">
                            <h2 property="schema:name">Background and motivation </h2>
			                <div datatype="rdf:HTML" property="schema:description" resource="#Backgroundandmotivation" typeof="deo:Motivation">
			                <p>In the last two decades, the IFC standard has been developed and maintained by buildingSMART as a standard data model for data exchanges between heterogeneous applications in the AEC/FM sector [10, 16]. The IFC schema is specified using the EXPRESS modeling language [25], while its instances are usually serialized in IFC STEP File format [26]. The comprehensiveness of the AEC domain makes IFC one of the largest EXPRESS-based data models across engineering industries. It provides a wide range of constructs for modeling building-related information. For example, one of the most recent versions, IFC4_ADD1, defines 768 entities and 1480 attributes on the schema level [10]. IFC has also provided a few mechanisms to extend semantics in the instance level including e.g. common property sets and external standard classification references. However, there are limited rules specified in IFC about usage of these constructs and mechanisms. On the other hand, the semantics required in the AEC industry are much more than all the available concepts formalized in the IFC data model. Therefore, a large amount of information is informally or implicitly represented with various ways and usually causes redundancies and ambiguities in IFC instance models [53]. As an object-oriented data model, IFC structures data mainly for the purpose of data exchange rather than for the understanding of the knowledge domain, and information is usually represented using relatively complex structures. From technical perspective, furthermore, the EXPRESS language family has not gained popularity outside the STEP initiative in either engineering or software development communities, and there is a very limited set of tools to support storage, query and management for data in the IFC native format. All these issues have brought about difficulties regarding data query and management of IFC instance data. </p><pre><code>SELECT ?e WHERE{ ?e a ifc:IfcBuildingElement . FILTER NOT EXISTS{ ?r ifc:relatedElements ?e . ?r a ifc:IfcRelContainedInSpatialStructure . ?r ifc:relatingStructure ?storey . ?storey a ifc:IfcBuildingStorey . } } </code></pre><p>Listing 1: Query to retrieve building elements which are not contained in a building storey. The query result can be used to check the spatial containment relationship for every building element. Converting the IFC schema and its instances to OWL and RDF was firstly proposed and implemented in [4] to facilitate use cases of data partition, data query and knowledge reasoning. It has been further developed by the buildingSMART Linked Data Working Group (LDWG) and has been specified as candidate standard status in 2015 [39]. Using inferencing and reasoning capabilities of RDF(S) and OWL, practical data processing scenarios in the building industry can be addressed with off-the-shelf algorithms and tools that would require custom tools using STEPbased modeling technologies. For example, a simple data validation use case requires that every building element should be associated with a building storey, can be implemented without hardcoding procedural validators [45, 57]. The relationship between a building element and the related building storey can be defined using an instance of IfcRelContainedInSpatialStructure, which is an objectified relationship defined in IFC. Provided that the building model is represented in the standardized ifcOWL, the query provided in Listing 1 can retrieve building elements which do not 4 BimSPARQL: Domain-specific functional SPARQL extensions for querying RDF building data have this spatial containment relationship using common SPARQL implementations 2 . As RDF and Linked Data have received increasing attention in the AEC industry, it makes sense to use SPARQL as a common language to process federated data sources instead of developing custom domain specific languages. Common instance model query scenarios that can be implemented using the current SPARQL specification include: – All building objects should be tagged with NLsfb classification code, which is a building product classification system used in Netherlands. – The type and thickness of walls can only be modelled according to the valid combinations provided in an external table X. – Retrieve all geo-locations of companies which produce the materials used in the walls placed in space X. All these scenarios not only need to query building models captured in e.g IFC, but also require data from other sources. We argue that they can be more easily implemented with RDF and SPARQL technologies without relying on proprietary systems. The conversion from IFC instances to ifcOWL RDF data is a straightforward process, and the data structures in IFC instances are reflected in the output RDF data [39]. Since standard SPARQL queries are only processed by matching the data graph patterns in RDF, the resulting queries are usually more complex than the high-level abstractions provided in use cases. For example, in the query case of Listing 1, it is better to have a shortcut relationship between a building element and a storey rather than the objectified solution of the regular schema. There are many commonly used structures that can be simplified all over the IFC data model to simplify query and make properties and relationships closer to the understanding of knowledge domains. Another problem that motivates this research and development work is that SPARQL can hardly retrieve useful information in scenarios where geometric computations and spatial reasoning is needed. Geometry data usually constitutes the largest sections 2 In this paper, all properties defined in ifcOWL are abbreviated to compact format in query listings e.g. ifc:relatedElements is used to represent ifc:relatedElements_IfcRelContainedInSpatialStructure, which is standardized in ifcOWL. Another simplification is that all the queries in this paper assume that they are under RDFS entailment, hence in this case all the instances of IfcBuildingElement subtypes are visited by the query. Fig. 2. A model that has incorrect semantic information with respect to its geometric data. The left one shows two walls which are stated as "contained in" (using IfcRelContainedInSpatialStructure) in a storey are actually located on the storey above. The second one shows three walls (the light grey ones) which are labelled as "is external" are actually internal. in building models (see Table 10) and contains large amounts of information that currently can only be interpreted by human domain end users. Although the IFC data model provides many ways to explicitly model geometry-related properties and topological relationships (e.g. property sets and explicit relationships such as the IfcRelContainedInSpatialStructure relationship used in Listing 1), they are not mandatory and not always reliable due to lack of rigidness in the IFC data model and the ad-hoc nature of design processes in the AEC domain. In practice, IFC building models often miss required semantic relationships and properties or contain incorrect or inconsistent information. Fig. 2 shows two examples of inconsistencies between semantic relationships and geometric representations in real building models. Directly deriving information from geometric representations of building models provides another option to enrich data and ensure consistency. Furthermore, much geometry-related information is impractical or impossible to be explicitly provided in IFC data. For example, there are specific topological relationships such as the "touching" relationship between the bottom surface of a wall to the upper surface of the floor slab (see Listing 8) [51], or properties such as distances between elements (see Listing 7). Across the different use cases analyzed in the context of the research presented here [10, 45, 48, 51], there are many commonly used concepts that are frequently reused. Using the query in Listing 1 as an example, the spatial containment relationship is required in data validation use cases, and is also important in many cases including e.g. cost estimation and building code compliance checking. By wrapping them as func- BimSPARQL: Domain-specific functional SPARQL extensions for querying RDF building data 5 tions used in a standard language (see Section 4), we are able to reuse them in many different applications.</p><figure data-equation="" data-image="23" data-figure-category="figure" data-caption="" id="F51000421" data-image-src="/media/images/6a414c03-4d18-4d0e-a653-d42e5b19fe05.jpg"><div><img src="6a414c03-4d18-4d0e-a653-d42e5b19fe05.jpg"/></div><figcaption><span class="figure-cat-figure" data-figure-category="figure">figure 1: </span></figcaption></figure><p><span class="citation" data-format="autocite" data-references="[{&quot;id&quot;:0}]">(Angles &amp; Gutiérre, 2008)</span><span class="citation" data-format="autocite" data-references="[{&quot;id&quot;:1882225438}]">(Battle &amp; Kolas, 2012)</span></p></div>
                    	</section></div><h1 class="article-bibliography-header"></h1><section id="references">
			            <h2>References</h2>
                        <div datatype="rdf:HTML" rel="schema:hasPart" typeof="deo:Reference">
                            <ol>
  <li><cite>Angles, R., &amp; Gutiérre, C. (Eds.). (2008). The expressive power of SPARQL.</cite></li>
  <li><cite>Battle, R., &amp; Kolas, D. (Eds.). (2012). Enabling the geospatial semantic web with parliament and geosparql.</cite></li>
</ol>
			            </div>
                    </section>
			    </div>
			</article>
		</main>
	</body>
</html>